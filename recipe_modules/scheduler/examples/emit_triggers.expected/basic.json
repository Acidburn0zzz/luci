[
  {
    "cmd": [
      "prpc",
      "call",
      "-format=json",
      "https://luci-scheduler-dev.appspot.com",
      "scheduler.Scheduler.EmitTriggers"
    ],
    "infra_step": true,
    "name": "luci-scheduler.EmitTriggers",
    "stdin": "{\"batches\": [{\"jobs\": [{\"job\": \"job1\", \"project\": \"proj\"}, {\"job\": \"job2\", \"project\": \"proj\"}], \"trigger\": {\"buildbucket\": {\"properties\": {\"some\": \"none\"}, \"tags\": [\"this:test\"]}, \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00001\", \"title\": \"compiler/123\", \"url\": \"https://example.com\"}}], \"timestamp\": 1337000001500000}",
    "stdout": "/path/to/tmp/json",
    "~followup_annotations": [
      "@@@STEP_TEXT@input {<br/>    \"batches\": [<br/>        {<br/>            \"jobs\": [<br/>                {<br/>                    \"job\": \"job1\", <br/>                    \"project\": \"proj\"<br/>                }, <br/>                {<br/>                    \"job\": \"job2\", <br/>                    \"project\": \"proj\"<br/>                }<br/>            ], <br/>            \"trigger\": {<br/>                \"buildbucket\": {<br/>                    \"properties\": {<br/>                        \"some\": \"none\"<br/>                    }, <br/>                    \"tags\": [<br/>                        \"this:test\"<br/>                    ]<br/>                }, <br/>                \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00001\", <br/>                \"title\": \"compiler/123\", <br/>                \"url\": \"https://example.com\"<br/>            }<br/>        }<br/>    ], <br/>    \"timestamp\": 1337000001500000<br/>}@@@"
    ]
  },
  {
    "cmd": [
      "prpc",
      "call",
      "-format=json",
      "https://luci-scheduler-dev.appspot.com",
      "scheduler.Scheduler.EmitTriggers"
    ],
    "infra_step": true,
    "name": "custom-batch-step",
    "stdin": "{\"batches\": [{\"jobs\": [{\"job\": \"job1\", \"project\": \"proj\"}, {\"job\": \"job2\", \"project\": \"proj\"}], \"trigger\": {\"buildbucket\": {\"properties\": {\"some\": \"none\"}, \"tags\": [\"parent_buildername:compiler\", \"parent_buildnumber:123\", \"this:test\", \"user_agent:recipe\"]}, \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00002\", \"title\": \"compiler/123\"}}, {\"jobs\": [{\"job\": \"job3\", \"project\": \"proj2\"}], \"trigger\": {\"buildbucket\": {\"properties\": {\"some\": \"one\"}, \"tags\": [\"any=tag\"]}, \"id\": \"id2\", \"title\": \"custom\"}}, {\"jobs\": [{\"job\": \"job1\", \"project\": \"proj3\"}], \"trigger\": {\"gitiles\": {\"ref\": \"refs/branch-heads/1235\", \"repo\": \"https://chromium.googlesource.com/chromium/src\", \"revision\": \"2d2b87e5f9c872902d8508f6377470a4a6fa87e1\"}, \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00003\", \"title\": \"advanced gitiles trigger\"}}], \"timestamp\": 1337000003000000}",
    "stdout": "/path/to/tmp/json",
    "~followup_annotations": [
      "@@@STEP_TEXT@input {<br/>    \"batches\": [<br/>        {<br/>            \"jobs\": [<br/>                {<br/>                    \"job\": \"job1\", <br/>                    \"project\": \"proj\"<br/>                }, <br/>                {<br/>                    \"job\": \"job2\", <br/>                    \"project\": \"proj\"<br/>                }<br/>            ], <br/>            \"trigger\": {<br/>                \"buildbucket\": {<br/>                    \"properties\": {<br/>                        \"some\": \"none\"<br/>                    }, <br/>                    \"tags\": [<br/>                        \"parent_buildername:compiler\", <br/>                        \"parent_buildnumber:123\", <br/>                        \"this:test\", <br/>                        \"user_agent:recipe\"<br/>                    ]<br/>                }, <br/>                \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00002\", <br/>                \"title\": \"compiler/123\"<br/>            }<br/>        }, <br/>        {<br/>            \"jobs\": [<br/>                {<br/>                    \"job\": \"job3\", <br/>                    \"project\": \"proj2\"<br/>                }<br/>            ], <br/>            \"trigger\": {<br/>                \"buildbucket\": {<br/>                    \"properties\": {<br/>                        \"some\": \"one\"<br/>                    }, <br/>                    \"tags\": [<br/>                        \"any=tag\"<br/>                    ]<br/>                }, <br/>                \"id\": \"id2\", <br/>                \"title\": \"custom\"<br/>            }<br/>        }, <br/>        {<br/>            \"jobs\": [<br/>                {<br/>                    \"job\": \"job1\", <br/>                    \"project\": \"proj3\"<br/>                }<br/>            ], <br/>            \"trigger\": {<br/>                \"gitiles\": {<br/>                    \"ref\": \"refs/branch-heads/1235\", <br/>                    \"repo\": \"https://chromium.googlesource.com/chromium/src\", <br/>                    \"revision\": \"2d2b87e5f9c872902d8508f6377470a4a6fa87e1\"<br/>                }, <br/>                \"id\": \"6a0a73b0-070b-492b-9135-9f26a2a00003\", <br/>                \"title\": \"advanced gitiles trigger\"<br/>            }<br/>        }<br/>    ], <br/>    \"timestamp\": 1337000003000000<br/>}@@@"
    ]
  },
  {
    "jsonResult": null,
    "name": "$result"
  }
]